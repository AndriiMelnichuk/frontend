<!DOCTYPE html>
<html>
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDoFam</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main-style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/head-container.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/search.css') }}">
</head>

<body>
    <!-- Head container -->
    <div class="head-container" >
        <h1 class="group-name">Your groups</h1> 
        <div class="button-container">
        <a type="button" class="create-group" id="openModal">Create group</a>
        </div>

    </div>

    <!-- Main container -->
    <div class="content" id="content">
        <!-- search group -->
        <form action="/group/search/" method="get">
            <div class="search-container" style="bottom: 20px;">
                <div class="search-box">
                    <input type="text" name="group_name" placeholder="Search...">
                    <button type="submit">Search</button> 
                </div>
            </div>
        </form>
        <div class="group-container"  id="group-container">
        </div>
    </div>
     


    <!-- Сайдбар -->
     {%include 'sidebar.html'%}
     {%include 'create-group-modal.html'%}


</body>

<script>
    let cont = document.getElementById('group-container')
    fetch('/groups/elements')
        .then(r => r.json())
        .then(data =>
            data.forEach(d => {
                var e = document.createElement('a')
                e.text = d.name
                e.classList.add('group-element')
                
                e.href = '/group/'+encodeURIComponent(d.name)+'?id='+encodeURIComponent(d.id)+'&admin='+encodeURIComponent(d.admin)
                cont.appendChild(e)
            }
            )
        )

</script>
</html>
